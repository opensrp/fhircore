<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-engineering/backend/info-gateway/custom-endpoints/location-hierarchy" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Location Hierarchy | OpenSRP Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://opensrp.github.io/engineering/backend/info-gateway/custom-endpoints/location-hierarchy"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Location Hierarchy | OpenSRP Documentation"><meta data-rh="true" name="description" content="The OpenSRP 2.0 Location Hierarchy endpoint is designed to efficiently retrieve and manage hierarchical location data within the OpenSRP system. The location hierarchy is defined by the Location.partOf property on the Location resource in the FHIR specification."><meta data-rh="true" property="og:description" content="The OpenSRP 2.0 Location Hierarchy endpoint is designed to efficiently retrieve and manage hierarchical location data within the OpenSRP system. The location hierarchy is defined by the Location.partOf property on the Location resource in the FHIR specification."><link data-rh="true" rel="icon" href="/img/opensrp-favicon.png"><link data-rh="true" rel="canonical" href="https://opensrp.github.io/engineering/backend/info-gateway/custom-endpoints/location-hierarchy"><link data-rh="true" rel="alternate" href="https://opensrp.github.io/engineering/backend/info-gateway/custom-endpoints/location-hierarchy" hreflang="en"><link data-rh="true" rel="alternate" href="https://opensrp.github.io/engineering/backend/info-gateway/custom-endpoints/location-hierarchy" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OE0COOL9QP-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="OpenSRP Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5a017294.css">
<script src="/assets/js/runtime~main.8b13e0fa.js" defer="defer"></script>
<script src="/assets/js/main.185c9b95.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/opensrp-logo.png" alt="OpenSRP Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/opensrp-logo.png" alt="OpenSRP Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://opensrp.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Home</a><a href="https://opensrp.io/about/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">About</a><a class="navbar__item navbar__link nav-active" href="/">Docs</a><a href="https://opensrp.io/screenshots/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Screenshots</a><a href="https://opensrp.io/impact/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Impact</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/project-information">Project Information</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">FEATURES</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/app-features">App Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/admin-dashboard-features">Admin Dashboard Features</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/features/supported-health-domains">Supported Domains</a><button aria-label="Expand sidebar category &#x27;Supported Domains&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">ENGINEERING</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engineering/quickstart-guide/running-the-app">Quickstart Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/app">App</a><button aria-label="Expand sidebar category &#x27;App&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/admin-dashboard">Admin Dashboard</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/engineering/backend">Backend</a><button aria-label="Collapse sidebar category &#x27;Backend&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/backend/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/backend/iam">Identity Access Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/engineering/backend/info-gateway">FHIR Gateway</a><button aria-label="Collapse sidebar category &#x27;FHIR Gateway&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/engineering/backend/info-gateway/custom-endpoints">Custom Endpoints</a><button aria-label="Collapse sidebar category &#x27;Custom Endpoints&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/engineering/backend/info-gateway/custom-endpoints/location-hierarchy">Location Hierarchy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/backend/info-gateway/custom-endpoints/practitioner-details">Practitioner Details</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/backend/info-gateway/sync-strategies">Sync Strategies</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/backend/infrastructure-setup">Infrastructure setup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engineering/integrations/dhis2">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/testing">Testing</a><button aria-label="Expand sidebar category &#x27;Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">DESIGN</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/design/introduction">Design</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ENGINEERING</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/engineering/backend"><span itemprop="name">Backend</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/engineering/backend/info-gateway"><span itemprop="name">FHIR Gateway</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/engineering/backend/info-gateway/custom-endpoints"><span itemprop="name">Custom Endpoints</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Location Hierarchy</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>OpenSRP Location Hierarchy Endpoint</h1></header>
<p>The OpenSRP 2.0 Location Hierarchy endpoint is designed to efficiently retrieve and manage hierarchical location data within the OpenSRP system. The location hierarchy is defined by the <code>Location.partOf</code> property on the <a href="https://hl7.org/fhir/R4B/location.html" target="_blank" rel="noopener noreferrer">Location resource</a> in the FHIR specification.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-data-retrieval-process">1. Data Retrieval Process<a href="#1-data-retrieval-process" class="hash-link" aria-label="Direct link to 1. Data Retrieval Process" title="Direct link to 1. Data Retrieval Process">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>The endpoint is designed to return data in two formats: a tree (hierarchical) format or a list format. This is controlled by a <code>mode</code> parameter. This endpoint is built to return the hierarchy starting from the provided IDs as the root to all its children. Below are the parameters allowed by the endpoint:</p>
<ul>
<li><code>_id</code> - This is the ID of the location for which you want the hierarchy. Example: <code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;</code></li>
<li><code>_syncLocations</code> - This parameter holds IDs of locations selected by the users. The locations are comma-separated. Example: <code>[GET] /LocationHierarchy?_syncLocations=&lt;some-location-id,some-location-id&gt;</code></li>
<li><code>administrativeLevelMin</code> - Specifies the minimum administrative level to include in the response. Locations at this level and above will be included. Example: <code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;administrativeLevelMin=2&amp;administrativeLevelMax=4</code></li>
<li><code>administrativeLevelMax</code> - Specifies the maximum administrative level to include in the response. Locations at this level and below will be included. Example: <code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;administrativeLevelMin=2&amp;administrativeLevelMax=4</code></li>
<li><code>filterInventory</code> - A boolean parameter that specifies whether the response should be filtered by locations with inventories. Example: <code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;filterInventory=true</code></li>
<li><code>_lastUpdated</code> - This filter allows users to retrieve locations based on the last modification date, making it useful for tracking recent updates or syncing data changes over time. Example: <code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;mode=list&amp;_lastUpdated=2024-09-22T15%3A13%3A53.014%2B00%3A00</code></li>
<li><code>_summary</code> - This allows users to retrieve the total number of matching resources without returning the resource data. Example: <code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;mode=list&amp;_summary=count</code></li>
<li><code>mode</code> - A parameter to switch between the two response formats. Example: <code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;mode=list</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="locationhierarchy-list-mode">LocationHierarchy List Mode<a href="#locationhierarchy-list-mode" class="hash-link" aria-label="Direct link to LocationHierarchy List Mode" title="Direct link to LocationHierarchy List Mode">​</a></h4>
<p>The LocationHierarchy endpoint supports two response formats: tree and list. By default, the response format remains a tree, providing hierarchical location data. In addition, clients can request the endpoint to return location resources in a flat list format by providing a request parameter <code>mode=list</code>.</p>
<p>Example:
<code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;mode=list&amp;_count=&lt;page-size&gt;&amp;_page=&lt;page-number&gt;&amp;_sort=&lt;some-sort&gt;</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="locationhierarchy-dynamic-identifier">LocationHierarchy Dynamic Identifier<a href="#locationhierarchy-dynamic-identifier" class="hash-link" aria-label="Direct link to LocationHierarchy Dynamic Identifier" title="Direct link to LocationHierarchy Dynamic Identifier">​</a></h4>
<p>The <code>LocationHierarchy</code> endpoint has the following supported functionalities when the <code>_id</code> is not provided as a parameter:</p>
<ul>
<li>Build location hierarchies of the <strong><em>User Assigned Locations</em></strong>: The <code>LocationHierarchy</code> endpoint will build location hierarchies of all user-assigned locations. Example: <code>[GET] /LocationHierarchy</code></li>
<li>Build location hierarchies of the <strong><em>User Selected Locations</em></strong>: The <code>LocationHierarchy</code> endpoint will build location hierarchies of the locations provided by the user via the <code>_syncLocations</code> parameter.<!-- -->
<ul>
<li>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="conditions-for-user-selected-location-hierarchies">Conditions for User Selected Location Hierarchies<a href="#conditions-for-user-selected-location-hierarchies" class="hash-link" aria-label="Direct link to Conditions for User Selected Location Hierarchies" title="Direct link to Conditions for User Selected Location Hierarchies">​</a></h5>
<ul>
<li>The deployment/app user should have Related Entity Location as their sync strategy.</li>
<li>The deployment/app user should have the <code>ALL_LOCATIONS</code> role on Keycloak.</li>
<li>The request should have the <code>_syncLocations</code> parameter set.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Example:
<code>[GET] /LocationHierarchy?_syncLocations=&lt;some-location-id&gt;,&lt;some-location-id&gt;,&lt;some-location-id&gt;</code></p>
<p>All other valid parameters can be used on this endpoint.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="locationhierarchy-administrative-level-filters">LocationHierarchy Administrative Level Filters<a href="#locationhierarchy-administrative-level-filters" class="hash-link" aria-label="Direct link to LocationHierarchy Administrative Level Filters" title="Direct link to LocationHierarchy Administrative Level Filters">​</a></h4>
<p>The LocationHierarchy endpoint supports filtering by administrative levels. This is useful for querying locations at specific levels within the hierarchy. The following search parameters are available:</p>
<ul>
<li><code>administrativeLevelMin</code>: Specifies the minimum administrative level to include in the response. Locations at this level and above will be included.</li>
<li><code>administrativeLevelMax</code>: Specifies the maximum administrative level to include in the response. Locations at this level and below will be included. If not set, it defaults to the value of <code>DEFAULT_MAX_ADMIN_LEVEL</code> set in the <a href="https://github.com/onaio/fhir-gateway-extension/blob/d38a787d082bf1ed8891ec808fd713326c3bfcb1/plugins/src/main/java/org/smartregister/fhir/gateway/plugins/Constants.java#L31" target="_blank" rel="noopener noreferrer"><code>Constants.java</code></a> file.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="behavior-based-on-parameters">Behavior Based on Parameters:<a href="#behavior-based-on-parameters" class="hash-link" aria-label="Direct link to Behavior Based on Parameters:" title="Direct link to Behavior Based on Parameters:">​</a></h5>
<ul>
<li>No Parameters Defined: The endpoint works as it does currently, returning the full hierarchy.</li>
<li>Only <code>administrativeLevelMin</code> Defined: The response will include all locations from the specified minimum administrative level up to the root.</li>
<li>Only <code>administrativeLevelMax</code> Defined: The response will include all locations from the root down to the specified maximum administrative level.</li>
<li>Both Parameters Defined: The response will include locations only within the specified range of administrative levels.</li>
</ul>
<p>Example:
<code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;administrativeLevelMin=2&amp;administrativeLevelMax=4&amp;_count=&lt;page-size&gt;&amp;_page=&lt;page-number&gt;&amp;_sort=&lt;some-sort&gt;</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="inventory-filters">Inventory Filters<a href="#inventory-filters" class="hash-link" aria-label="Direct link to Inventory Filters" title="Direct link to Inventory Filters">​</a></h4>
<p>The <code>LocationHierarchy</code> endpoint supports filtering by inventory availability, allowing users to specify whether they want to retrieve only locations that have associated inventories. This filter can be particularly useful for narrowing down the results to locations that are actively involved in inventory management. The following search parameter is available:</p>
<ul>
<li><code>filterInventory</code>: A boolean parameter that specifies whether the response should be filtered by locations with inventories.<!-- -->
<ul>
<li><code>filterInventory=true</code>: Only locations with inventories will be included in the response.</li>
<li><code>filterInventory=false</code> (or not set): Locations with or without inventories will be returned. This effectively disables inventory-based filtering. The response will include all locations, regardless of their inventory status. Both locations with and without inventories will be returned.</li>
</ul>
</li>
</ul>
<p>Example:
<code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;filterInventory=true&amp;_count=&lt;page-size&gt;&amp;_page=&lt;page-number&gt;&amp;_sort=&lt;some-sort&gt;</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lastupdated-filters">LastUpdated Filters<a href="#lastupdated-filters" class="hash-link" aria-label="Direct link to LastUpdated Filters" title="Direct link to LastUpdated Filters">​</a></h4>
<p>The <code>LocationHierarchy</code> endpoint supports filtering by the last updated timestamp of locations. This filter allows users to retrieve locations based on the last modification date, making it useful for tracking recent updates or syncing data changes over time. The behavior based on the <code>_lastUpdated</code> parameter is as follows:</p>
<ul>
<li><code>_lastUpdated</code> Not Defined: The endpoint will include all locations in the response, regardless of when they were last modified.</li>
<li><code>_lastUpdated</code> Defined: The response will include only those locations that were updated on or after the specified timestamp.</li>
</ul>
<p>Note: This filter only works when in list mode, i.e., <code>mode=list</code> is set as one of the parameters.</p>
<p>Example:
<code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;mode=list&amp;_lastUpdated=2024-09-22T15%3A13%3A53.014%2B00%3A00&amp;_count=&lt;page-size&gt;&amp;_page=&lt;page-number&gt;&amp;_sort=&lt;some-sort&gt;</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="locationhierarchy-summary-count">LocationHierarchy Summary Count<a href="#locationhierarchy-summary-count" class="hash-link" aria-label="Direct link to LocationHierarchy Summary Count" title="Direct link to LocationHierarchy Summary Count">​</a></h4>
<p>The LocationHierarchy endpoint supports the <code>_summary=count</code> parameter. This allows users to retrieve the total number of matching resources without returning the resource data. This filter only works when in list mode, i.e., <code>mode=list</code> is set as one of the parameters.</p>
<p>Example:
<code>[GET] /LocationHierarchy?_id=&lt;some-location-id&gt;&amp;mode=list&amp;_summary=count</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-location-hierarchy-creation">2. Location Hierarchy Creation<a href="#2-location-hierarchy-creation" class="hash-link" aria-label="Direct link to 2. Location Hierarchy Creation" title="Direct link to 2. Location Hierarchy Creation">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opensrp/fhircore/tree/main/docs/engineering/backend/info-gateway/custom-endpoints/location-hierarchy.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/engineering/backend/info-gateway/custom-endpoints"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Custom Endpoints</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/engineering/backend/info-gateway/custom-endpoints/practitioner-details"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Practitioner Details</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-data-retrieval-process" class="table-of-contents__link toc-highlight">1. Data Retrieval Process</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li></ul></li><li><a href="#2-location-hierarchy-creation" class="table-of-contents__link toc-highlight">2. Location Hierarchy Creation</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensrp.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenSRP<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ona.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ona<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Ona Systems</div></div></div></footer></div>
</body>
</html>