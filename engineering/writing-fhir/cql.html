<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-engineering/writing-fhir/cql/cql" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">CQL | OpenSRP Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://opensrp.github.io/engineering/writing-fhir/cql"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CQL | OpenSRP Documentation"><meta data-rh="true" name="description" content="This Documentation on CQL is to give some insights on"><meta data-rh="true" property="og:description" content="This Documentation on CQL is to give some insights on"><link data-rh="true" rel="icon" href="/img/opensrp-favicon.png"><link data-rh="true" rel="canonical" href="https://opensrp.github.io/engineering/writing-fhir/cql"><link data-rh="true" rel="alternate" href="https://opensrp.github.io/engineering/writing-fhir/cql" hreflang="en"><link data-rh="true" rel="alternate" href="https://opensrp.github.io/engineering/writing-fhir/cql" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6faaae7e.css">
<script src="/assets/js/runtime~main.495ca19c.js" defer="defer"></script>
<script src="/assets/js/main.24836609.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/opensrp-logo.png" alt="OpenSRP Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/opensrp-logo.png" alt="OpenSRP Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://opensrp.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Home</a><a href="https://opensrp.io/about/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">About</a><a class="navbar__item navbar__link nav-active" href="/">Docs</a><a href="https://opensrp.io/screenshots/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Screenshots</a><a href="https://opensrp.io/impact/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Impact</a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/project-information">Project Information</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">FEATURES</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/app-features">App Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/admin-dashboard-features">Admin Dashboard Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/supported-health-domains">Supported Domains</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/design">Design</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">ENGINEERING</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/engineering/android-app">Android App</a><button aria-label="Collapse sidebar category &#x27;Android App&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/engineering/android-app/developer-setup">Developer setup</a><button aria-label="Expand sidebar category &#x27;Developer setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/android-app/automated-releases">Releases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/engineering/android-app/configuring">Configuring</a><button aria-label="Expand sidebar category &#x27;Configuring&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/engineering/android-app/datastore">Data storage</a><button aria-label="Expand sidebar category &#x27;Data storage&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/engineering/android-app/system-design/configs-versioning">System Design</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/engineering/backend">Backend</a><button aria-label="Expand sidebar category &#x27;Backend&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/engineering/writing-fhir">Writing FHIR</a><button aria-label="Collapse sidebar category &#x27;Writing FHIR&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/engineering/writing-fhir/cql">CQL</a><button aria-label="Collapse sidebar category &#x27;CQL&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/cql/convert-cql-to-library">Converting CQL to a library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/cql/sample-usage">CQL use cases</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/fhir_path">FHIRPath expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/form-authoring">Form Authoring (Things to consider when writing forms)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/plan-definiton">PlanDefinitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/sample-fhir-resources">Sample FHIR resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/smart-vax-certs">Smart Vaccination Certificates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/testing-resources">Testing FHIR Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/writing-fhir/tooling">Tooling</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ENGINEERING</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/engineering/writing-fhir"><span itemprop="name">Writing FHIR</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CQL</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>CQL</h1>
<p>This Documentation on CQL is to give some insights on</p>
<ol>
<li>How to author the CQL script</li>
<li>How to load and execute CQL scripts</li>
<li>Some sample use cases where we have used CQL</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-cql">What is CQL<a href="#what-is-cql" class="hash-link" aria-label="Direct link to What is CQL" title="Direct link to What is CQL">​</a></h2>
<p>CQL­ is a Health Level Seven International® (HL7®) authoring language standard that’s intended to be human readable. It is part of the effort to harmonize standards used for electronic clinical quality measures (eCQMs) and clinical decision support (CDS).</p>
<p>CQL provides the ability to express logic that is human readable yet structured enough for processing a query electronically. CQL is the expression logic used in Health Quality Measure Format (HQMF) beginning with the eCQMs implemented in calendar year 2019.</p>
<p>CQL replaces the logic expressions previously defined in the Quality Data Model (QDM). Beginning with v5.3, QDM includes only the conceptual model for defining the data elements (the data model). Measure authors with access to the Measure Authoring Tool (MAT) can use the tool to author measures using CQL­. Visit the MAT webpage for more information.</p>
<p>CQL allows for a more modular, flexible, and robust expression of the logic. It allows logic to be shared between measures and with clinical decision support.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cql-logicdecision-library">CQL Logic/Decision Library<a href="#cql-logicdecision-library" class="hash-link" aria-label="Direct link to CQL Logic/Decision Library" title="Direct link to CQL Logic/Decision Library">​</a></h2>
<p>The Clinical Quality Language (<code>CQL</code>) Specification provides a way to define, data querying, processing and logical expressions in a simplified and user-friendly way. <a href="https://cql.hl7.org/01-introduction.html" target="_blank" rel="noopener noreferrer">Here</a> is a detailed guide on <code>CQL</code>. Some example <code>CQL</code> scripts can be found <a href="https://github.com/opensrp/fhir-resources/tree/main/ecbis/measure_cql" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Since <code>CQL</code> itself is a user-friendly script rather than a parseable configuration or program, it needs a <code>JSON</code> or <code>XML</code> form that can be lexically parsed and understood by the parser.For this it is needs to be transformed into a JSON form called Expression Logical Model(ELM) aka <code>json+elm</code>. An XML form <code>xml+elm</code> can also used. In most cases, we shall be using <code>json+elm</code> for parsing FHIR Core Decision or Reporting Logic.</p>
<p>The translated <code>elm</code> and <code>cql</code> is then added to FHIR <a href="http://hl7.org/fhir/R4/library.html" target="_blank" rel="noopener noreferrer">Library</a> resource as Base64 encoded data to allow the code to get the calculation for each variable to be used by FHIR compatible software.</p>
<p>Some resources to get details on CQL writing are below:</p>
<ul>
<li>CQL brief authoring guide <a href="https://cql.hl7.org/02-authorsguide.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/02-authorsguide.html</a></li>
<li>CQL operators and functions <a href="https://cql.hl7.org/04-logicalspecification.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/04-logicalspecification.html</a> and <a href="https://cql.hl7.org/09-b-cqlreference.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/09-b-cqlreference.html</a></li>
<li>FHIRPath mapping in CQL <a href="https://cql.hl7.org/16-i-fhirpathtranslation.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/16-i-fhirpathtranslation.html</a>
<ul>
<li>Examples <a href="https://cql.hl7.org/15-h-timeintervalcalculations.html" target="_blank" rel="noopener noreferrer">Time Interval</a> and <a href="https://cql.hl7.org/03-developersguide.html#conditional-expressions" target="_blank" rel="noopener noreferrer">Detail on Queries</a></li>
</ul>
</li>
<li>CQL Sandbox <a href="https://sandbox.cqlab.io/" target="_blank" rel="noopener noreferrer">here</a></li>
<li>CQL Android editor app <a href="https://github.com/Path-Check/cql-editor-app/" target="_blank" rel="noopener noreferrer">here</a></li>
</ul>
<p>Here is a working example of CQL for a <a href="http://hl7.org/fhir/measure.html" target="_blank" rel="noopener noreferrer">Measure</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library HOUSEHOLDIND01 version &#x27;1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using FHIR version &#x27;4.0.1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">include &quot;FHIRHelpers&quot; version &#x27;4.0.1&#x27; called FHIRHelpers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">include &quot;COMMON&quot; version &#x27;1&#x27; called COMMON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context Patient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// to ensure that Measure Period with a closed boundary can be handled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Filter Period&quot;: Interval(&quot;Measurement Period&quot;.low - 1 day , &quot;Measurement Period&quot;.high + 1 day)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;All Groups&quot;: [Group] G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where G.type = &#x27;person&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    and First(G.identifier).period.start during &quot;Filter Period&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;All Group Members&quot;: flatten(&quot;All Groups&quot; G return (G.member M return M.entity))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Group&quot;: &quot;All Groups&quot; G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return G.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Group Member&quot;: &quot;All Group Members&quot; G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where COMMON.&quot;IdPart&quot;(Patient.id) = Split(G.reference, &#x27;/&#x27;)[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Patients&quot;: {Patient}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Males&quot;: Patient.gender=&#x27;male&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Females&quot;: Patient.gender=&#x27;female&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Age&quot;: CalculateAgeInYearsAt(Patient.birthDate, ToDate(&quot;Measurement Period&quot;.high))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Age Stratifier&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    when &quot;Age&quot; &lt; 1 then &#x27;P0Y&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    when &quot;Age&quot; in Interval[1,5] then &#x27;P1-5Y&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    when &quot;Age&quot; in Interval[6, 14] then &#x27;P6-14Y&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    when &quot;Age&quot; in Interval[15, 49] then &#x27;P15-49Y&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    when &quot;Age&quot; &gt;= 50 then &#x27;P50Y&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else &#x27;Unspecified&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The variables in CQL can be referenced into a <a href="http://hl7.org/fhir/measure.html" target="_blank" rel="noopener noreferrer">Measure</a> and/or <a href="http://hl7.org/fhir/plandefinition.html" target="_blank" rel="noopener noreferrer">PlanDefinition</a> after adding the <code>Library</code> containing CQL as referenced library.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-challenges-with-cql">Common challenges with CQL<a href="#common-challenges-with-cql" class="hash-link" aria-label="Direct link to Common challenges with CQL" title="Direct link to Common challenges with CQL">​</a></h2>
<p>CQL scripts when run first time take too long to run. Look into libraries or classes it loads first time and move those to Application startup. To solve this pre-load the libraries.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/opensrp/fhircore/tree/main/docs/engineering/writing-fhir/cql/cql.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/engineering/writing-fhir"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Writing FHIR</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/engineering/writing-fhir/cql/convert-cql-to-library"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Converting CQL to a library</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-cql" class="table-of-contents__link toc-highlight">What is CQL</a></li><li><a href="#cql-logicdecision-library" class="table-of-contents__link toc-highlight">CQL Logic/Decision Library</a></li><li><a href="#common-challenges-with-cql" class="table-of-contents__link toc-highlight">Common challenges with CQL</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensrp.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenSRP<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ona.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ona<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Ona Systems</div></div></div></footer></div>
</body>
</html>