<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-engineering/app/configuring/in-app-reporting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">In-app reporting | OpenSRP Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://opensrp.github.io/engineering/app/configuring/in-app-reporting"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="In-app reporting | OpenSRP Documentation"><meta data-rh="true" name="description" content="The in-app reporting feature empowers the health worker to see how she is performing against her daily task list, and allows for offline peer-to-peer syncing of the data collected on a daily basis. This greatly simplifies reporting requirements by eliminating the need for cumbersome paper registries and tally sheets."><meta data-rh="true" property="og:description" content="The in-app reporting feature empowers the health worker to see how she is performing against her daily task list, and allows for offline peer-to-peer syncing of the data collected on a daily basis. This greatly simplifies reporting requirements by eliminating the need for cumbersome paper registries and tally sheets."><link data-rh="true" rel="icon" href="/img/opensrp-favicon.png"><link data-rh="true" rel="canonical" href="https://opensrp.github.io/engineering/app/configuring/in-app-reporting"><link data-rh="true" rel="alternate" href="https://opensrp.github.io/engineering/app/configuring/in-app-reporting" hreflang="en"><link data-rh="true" rel="alternate" href="https://opensrp.github.io/engineering/app/configuring/in-app-reporting" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OE0COOL9QP-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="OpenSRP Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5a017294.css">
<script src="/assets/js/runtime~main.6e0863f4.js" defer="defer"></script>
<script src="/assets/js/main.9391d8d5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/opensrp-logo.png" alt="OpenSRP Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/opensrp-logo.png" alt="OpenSRP Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://opensrp.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Home</a><a href="https://opensrp.io/about/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">About</a><a class="navbar__item navbar__link nav-active" href="/">Docs</a><a href="https://opensrp.io/screenshots/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Screenshots</a><a href="https://opensrp.io/impact/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Impact</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/project-information">Project Information</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">FEATURES</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/app-features">App Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/admin-dashboard-features">Admin Dashboard Features</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/features/supported-health-domains">Supported Domains</a><button aria-label="Expand sidebar category &#x27;Supported Domains&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">ENGINEERING</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engineering/quickstart-guide/running-the-app">Quickstart Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/engineering/app">App</a><button aria-label="Collapse sidebar category &#x27;App&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/app/developer-setup">Developer setup</a><button aria-label="Expand sidebar category &#x27;Developer setup&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/automated-releases">Releases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/engineering/app/configuring">Configuring</a><button aria-label="Collapse sidebar category &#x27;Configuring&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/add-application-flavors">App flavors</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engineering/app/configuring/config-types/ImplementationGuide">Config types</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/data-migration">Data migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/editing">Editing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engineering/app/configuring/event-management/refresh-cache">Event management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/app/configuring/forms">Forms</a><button aria-label="Expand sidebar category &#x27;Forms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/engineering/app/configuring/in-app-reporting">In-app reporting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/internationalization">Internationalization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/p2p_sync">P2P Sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/pdf-generation">PDF Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/specific-use-cases">Specific use cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/working-in-debug-mode">Working in debug mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/app/configuring/working-with-rules">Working with rules</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/app/configuring/writing-fhir">Writing FHIR</a><button aria-label="Expand sidebar category &#x27;Writing FHIR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/app/datastore">Data storage</a><button aria-label="Expand sidebar category &#x27;Data storage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engineering/app/system-design/configs-versioning">System design</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineering/admin-dashboard">Admin Dashboard</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/backend">Backend</a><button aria-label="Expand sidebar category &#x27;Backend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/engineering/integrations/dhis2">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineering/testing">Testing</a><button aria-label="Expand sidebar category &#x27;Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">DESIGN</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/design/introduction">Design</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ENGINEERING</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/engineering/app"><span itemprop="name">App</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/engineering/app/configuring"><span itemprop="name">Configuring</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">In-app reporting</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>In-app reporting</h1></header>
<p>The in-app reporting feature empowers the health worker to see how she is performing against her daily task list, and allows for offline peer-to-peer syncing of the data collected on a daily basis. This greatly simplifies reporting requirements by eliminating the need for cumbersome paper registries and tally sheets.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="measure">Measure<a href="#measure" class="hash-link" aria-label="Direct link to Measure" title="Direct link to Measure">​</a></h2>
<p>A <a href="http://hl7.org/fhir/R4/measure.html" target="_blank" rel="noopener noreferrer">Measure</a> is a FHIR resource which represents definition- for calculation of an Indicator. The Measure uses a logic Library that contains the calculation logic for measure that is written as a Clinical Quality Language (CQL) expression.
The Measure resource represents a structured, computable definition of a health-related measure such as a clinical quality measure, public health indicator, or population analytics measure. A quality measure is a quantitative tool to assess the performance of an individual or organization with respect to a specified process or outcome via the measurement of actions, processes, or outcomes of clinical care. Quality measures are often derived from clinical guidelines and are designed to determine whether the appropriate care has been provided given a set of clinical criteria and an evidence base.</p>
<p><a href="https://build.fhir.org/library.html" target="_blank" rel="noopener noreferrer">Library - FHIR v4.6.0</a> resource is referenced that contains the logic required by the measure, and the various expression elements, such as population criteria, reference named expressions within that library (or libraries). In addition, if the Measure references multiple libraries, then any expression references within the resource must be qualified with the name of the library that contains the referenced expression.</p>
<p>The complexity involved in specifying the criteria in the general case requires the use of a high-level query language such as Clinical Quality Language (CQL). As such, the Measure resource defines only the top-level populations and references expressions for the actual criteria. These expressions are typically provided using a <a href="https://build.fhir.org/library.html" target="_blank" rel="noopener noreferrer">Library</a> <a href="https://build.fhir.org/library.html" target="_blank" rel="noopener noreferrer">Library - FHIR v4.6.0</a> resource containing CQL or ELM expressions. In addition, the individual members of a population may be cases such as encounters or procedures and in these cases, the Group resource would be unable to represent the population characteristics accurately.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="measurereport">MeasureReport<a href="#measurereport" class="hash-link" aria-label="Direct link to MeasureReport" title="Direct link to MeasureReport">​</a></h2>
<p>The MeasureReport resource represents the results of calculating a measure for a specific subject or group of subjects. The <strong><em>$evaluate-measure</em></strong> operation of the Measure resource is defined to return a MeasureReport. The resource is capable of representing three different levels of report: individual, subject-list, and summary.</p>
<p>The Measure resource represents a structured, computable definition of a health-related measure such as a clinical quality measure, public health indicator, or population analytics measure. A quality measure is a quantitative tool to assess the performance of an individual or organization with respect to a specified process or outcome via the measurement of actions, processes, or outcomes of clinical care. Quality measures are often derived from clinical guidelines and are designed to determine whether the appropriate care has been provided given a set of clinical criteria and an evidence base.</p>
<p>Note that the Measure itself does not typically contain any logic; rather a Library resource is referenced that contains the logic required by the measure, and the various expression elements, such as population criteria, reference named expressions within that library (or libraries). This is done using the Clinical Quality Language syntax. The library will contain a CQL-ELM embedded as a base64 . Read more here <a href="https://cql.hl7.org/index.html" target="_blank" rel="noopener noreferrer">Clinical Quality Language (CQL)</a></p>
<p>In addition, if the Measure references multiple libraries, then any expression references within the resource must be qualified with the name of the library that contains the referenced expression.</p>
<p>Read more here  <a href="https://build.fhir.org/clinicalreasoning-quality-reporting.html" target="_blank" rel="noopener noreferrer">Clinicalreasoning-quality-reporting - FHIR v4.6.0</a>  and here <a href="https://build.fhir.org/ig/HL7/cqf-measures/glossary.html" target="_blank" rel="noopener noreferrer">HL7.FHIR.US.CQFMEASURES\Glossary - FHIR v4.0.1</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-measurereports"><strong>Types of MeasureReports</strong><a href="#types-of-measurereports" class="hash-link" aria-label="Direct link to types-of-measurereports" title="Direct link to types-of-measurereports">​</a></h4>
<ol>
<li>
<p><strong>Cohort</strong>
A measure score in which a population is identified from the population of all items being counted. For example, one can identify all the patients who have had H1N1 symptoms. This population is very similar to the Initial Population but is called a Cohort Population for public health purposes.</p>
</li>
<li>
<p><strong>Continuous Variable</strong>
A measure score in which each individual value for the measure can fall anywhere along a continuous scale and can be aggregated using a variety of methods such as the calculation of a mean or median (for example, mean number of minutes between presentation of chest pain to the time of administration of thrombolytics)</p>
</li>
<li>
<p><strong>Proportion</strong>
A score derived by dividing the number of cases that meet a criterion for quality (the numerator) by the number of eligible cases within a given time frame (the denominator) where the numerator cases are a subset of the denominator cases (for example, percentage of eligible women with a mammogram performed in the last year).</p>
</li>
<li>
<p><strong>Ratio</strong>
A ratio is a score that is derived by dividing a count of one type of data by a count of another type of data. For example, the number of patients with central lines who develop infection divided by the number of central line days</p>
</li>
</ol>
<p>A working example (Households and Members disaggregated by age) of Measure can be found <a href="https://github.com/opensrp/fhir-resources/blob/main/ecbis/measure/household_measure.fhir.json" target="_blank" rel="noopener noreferrer">here</a>. Notable components in example Measure are</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;url&quot;: &quot;http://fhir.org/guides/who/anc-cds/Measure/HOUSEHOLDIND01&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &quot;HOUSEHOLDIND01&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;relatedArtifact&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;depends-on&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;label&quot;: &quot;FHIRHelpers|4.0.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resource&quot;: &quot;Library/1753&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   } ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;library&quot;: [ &quot;http://fhir.org/guides/cqf/common/Library/HOUSEHOLDIND01&quot; ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scoring&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;group&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;males&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;population&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;initial-population&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;criteria&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;language&quot;: &quot;text/cql-identifier&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expression&quot;: &quot;Patients&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;denominator&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;criteria&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;language&quot;: &quot;text/cql-identifier&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expression&quot;: &quot;Group Member&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;numerator&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;criteria&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;language&quot;: &quot;text/cql-identifier&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expression&quot;: &quot;Males&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;stratifier&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;id&quot;: &quot;by-age&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;criteria&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;language&quot;: &quot;text/cql-identifier&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;expression&quot;: &quot;Age Stratifier&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { ... ... ... } ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { ... ... ... } ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;supplementalData&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;description&quot;: &quot;groups&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;criteria&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;language&quot;: &quot;text/cql-identifier&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;expression&quot;: &quot;Group&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Details of notable fields for Measure</strong></p>
<ol>
<li>
<p><strong>url</strong>: The complete url of Measure with Measure.name i.e. <a href="http://fhir.org/guides/who/anc-cds/Measure/HOUSEHOLDIND01" target="_blank" rel="noopener noreferrer">http://fhir.org/guides/who/anc-cds/Measure/HOUSEHOLDIND01</a></p>
</li>
<li>
<p><strong>name</strong>: A unique name for Measure i.e. <code>HOUSEHOLDIND01</code>. The Measure is loaded by name and url into measure processor</p>
</li>
<li>
<p><strong>relatedArtifact</strong>: Helper libraries to load before running Measure to be used by measure logic libraries i.e. FHIRHelpers|4.0.1. The Library is loaded by its canonical url i.e. Library/123</p>
</li>
<li>
<p><strong>library</strong>: The CQL logic libraries used by Measure for calculation i.e. <a href="http://fhir.org/guides/cqf/common/Library/HOUSEHOLDIND01" target="_blank" rel="noopener noreferrer">http://fhir.org/guides/cqf/common/Library/HOUSEHOLDIND01</a>. The logic library is loaded by its url. The url must end with /Library/name</p>
</li>
<li>
<p><strong>scoring</strong>: proportion | ratio | continuous-variable | cohort</p>
</li>
<li>
<p><strong>group</strong>: The section of report defining the stats for a specific indicator (may be disaggregated by stratifier). Each group has following components</p>
<ul>
<li><strong>id</strong>: Group name/id.</li>
<li><strong>population</strong>: The calculations (or name of variable in CQL that defines the value) for each of population components i.e. initial-population, denominator, numerator</li>
<li><strong>stratifier</strong>: The disaggregations for given population numerator. i.e. by age, by month, by education etc</li>
<li><strong>supplementalData</strong>: Any extra data or intermediate calculation to be output to final report. Current implementation of MeasureEvaluator does not allow running any measure which is not Patient centric i.e. a Measure.subject can always be a Patient. Hence, we are using <code>supplementalData</code> to output Group for each indicator and then counting distinct Group to count Households</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cql-logicdecision-library-for-measure">CQL Logic/Decision Library for Measure<a href="#cql-logicdecision-library-for-measure" class="hash-link" aria-label="Direct link to CQL Logic/Decision Library for Measure" title="Direct link to CQL Logic/Decision Library for Measure">​</a></h2>
<p>The Measure needs a <a href="http://hl7.org/fhir/R4/library.html" target="_blank" rel="noopener noreferrer">Library</a> to get the logic/calculation for ecah variable. This calculation or logic comes from CQL. <a href="https://cql.hl7.org/01-introduction.html" target="_blank" rel="noopener noreferrer">Here</a> is a detailed guide on CQL. Some example CQL scripts can be found <a href="https://github.com/opensrp/fhir-resources/tree/main/ecbis/measure_cql" target="_blank" rel="noopener noreferrer">here</a>.</p>
<ul>
<li>CQL brief authoring guide <a href="https://cql.hl7.org/02-authorsguide.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/02-authorsguide.html</a></li>
<li>CQL operators and functions <a href="https://cql.hl7.org/04-logicalspecification.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/04-logicalspecification.html</a> and <a href="https://cql.hl7.org/09-b-cqlreference.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/09-b-cqlreference.html</a></li>
<li>Fhirpath mapping in CQL <a href="https://cql.hl7.org/16-i-fhirpathtranslation.html" target="_blank" rel="noopener noreferrer">https://cql.hl7.org/16-i-fhirpathtranslation.html</a></li>
<li>Examples <a href="https://cql.hl7.org/15-h-timeintervalcalculations.html" target="_blank" rel="noopener noreferrer">Time Interval</a> and <a href="https://cql.hl7.org/03-developersguide.html#conditional-expressions" target="_blank" rel="noopener noreferrer">Detail on Queries</a></li>
<li>CQL Sandbox is [here](<a href="https://sandbox.cqlab.io/" target="_blank" rel="noopener noreferrer">https://sandbox.cqlab.io/</a> CQL sandbox)</li>
<li>CQL android editor app is <a href="https://github.com/Path-Check/cql-editor-app/" target="_blank" rel="noopener noreferrer">here</a></li>
</ul>
<p>A working example of used by above Measure is <a href="https://github.com/opensrp/fhir-resources/blob/main/ecbis/measure_cql/household_measure_reporting.cql" target="_blank" rel="noopener noreferrer">here</a>. Some notable lines are</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">library HOUSEHOLDIND01 version &#x27;1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">include &quot;FHIRHelpers&quot; version &#x27;4.0.1&#x27; called FHIRHelpers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// The Measure interval has closed boundaries. Read details https://cql.hl7.org/02-authorsguide.html#interval-values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context Patient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;All Groups&quot;: [Group] G where G.type = &#x27;person&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;All Group Members&quot;: flatten(&quot;All Groups&quot; G return (G.member M return M.entity))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Group&quot;: &quot;All Groups&quot; G return G.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Group Member&quot;: &quot;All Group Members&quot; G where &quot;Patient Id&quot; = Split(G.reference, &#x27;/&#x27;)[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Patients&quot;: {Patient}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Males&quot;: Patient.gender=&#x27;male&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Females&quot;: Patient.gender=&#x27;female&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Age&quot;: CalculateAgeInYearsAt(Patient.birthDate, ToDate(&quot;Measurement Period&quot;.high))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define &quot;Age Stratifier&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    when &quot;Age&quot; &lt; 1 then &#x27;P0Y&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The CQL is referenced by url into Measure. The CQL is translated into elm-json and uploaded a Library on server. There are multiple ways to get elm for CQL. (elm-xml is also a valid standard but it is not recognized by android fhir libraries yet)</p>
<p><strong>CQL to ELM REST Translator</strong></p>
<p>A <a href="https://github.com/cqframework/cql-translation-service/blob/master/README.md" target="_blank" rel="noopener noreferrer">elm REST app</a> that can be used to run elm microservice and convert CQL via a REST API.</p>
<p><strong>CQL to ELM JAVA Translator</strong></p>
<p>A <a href="https://github.com/cqframework/clinical_quality_language/blob/master/Src/java/READM.md" target="_blank" rel="noopener noreferrer">elm java app</a> that can be used to elm translator on files and get an output. Instructions can be found <a href="https://github.com/cqframework/cql-execution#to-execute-your-cql" target="_blank" rel="noopener noreferrer">here</a></p>
<p><em><strong>Note</strong> : Above approaches output a json elm which then need to be base64 decoded and copied to the <a href="http://hl7.org/fhir/R4/library.html" target="_blank" rel="noopener noreferrer">Library</a> content as Attachment.</em></p>
<p><strong>How to Test your CQL Script</strong></p>
<p>The <a href="https://github.com/opensrp/fhir-resources/blob/main/fhircore-testing" target="_blank" rel="noopener noreferrer">fhir-resources</a> repository has a testing module which allows to not only get the complete Library resource to directly save to server but also allows to test the Measure output and make changes on the fly. Check the cucumber tests <a href="https://github.com/opensrp/fhir-resources/blob/main/fhircore-testing/src/test/resources/measure-report/household-members.feature" target="_blank" rel="noopener noreferrer">Feature File</a>, the <a href="https://github.com/opensrp/fhir-resources/blob/main/fhircore-testing/src/test/kotlin/com/fhircore/resources/testing/measure/HouseholdMembersMeasureTest.kt#L28" target="_blank" rel="noopener noreferrer">Test Code File</a> and the <a href="https://github.com/opensrp/fhir-resources/blob/main/fhircore-testing/src/test/kotlin/com/fhircore/resources/testing/CqlUtils.kt#L31" target="_blank" rel="noopener noreferrer">Convertor Util Method</a></p>
<p><strong>OpenSRP Unit Tests</strong></p>
<p>The CQL can also be translated to Library using an approach as used by OpenSRP as in <a href="https://github.com/opensrp/fhircore/blob/main/android/quest/src/test/java/org/smartregister/fhircore/quest/CqlContentTest.kt#L57" target="_blank" rel="noopener noreferrer">CQL Content Tests</a>. A complete Library resource is output to console as a result.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-measure-cql-library">Testing the Measure CQL Library<a href="#testing-the-measure-cql-library" class="hash-link" aria-label="Direct link to Testing the Measure CQL Library" title="Direct link to Testing the Measure CQL Library">​</a></h2>
<p>To make sure your Measure and Library are working and have been validated data, it is best to thoroughly test the input and output first so that multiple updates to server can be avoided and an easy and quick test driven approach is opted to implement your new functionality. The fhir-resources <a href="https://github.com/opensrp/fhir-resources" target="_blank" rel="noopener noreferrer">repository</a> has a testing module which implements Cucumber tests to help facilitate this.</p>
<ul>
<li>Checkout <a href="https://github.com/opensrp/fhir-resources" target="_blank" rel="noopener noreferrer">fhir-resources</a> Repository</li>
<li>Open module fhircore-testing into Intellij or VS Code</li>
<li>Install Cucumber plugin (optional and allows to run feature file directly)</li>
<li>The module has a lot of helper functions to allow creating sample data and testing basic MeasureReport output. if you understand Cucumber you can add a complete custom test as well</li>
<li>Add you test feature file to fhircore-testing/src/test/resources/measure-report/ i.e. fhircore-testing/src/test/resources/measure-report/household-members.feature</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Feature: Household Members Count by Age group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Scenario: Household members in household disaggregated by age group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Given Household Members CQL is &quot;ecbis/measure_cql/household_measure_reporting.cql&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Given Household Members Measure is &quot;ecbis/measure/household_measure.fhir.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Given Household Members Sample Bundle has 19 Groups; of them 17 active person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Given Household Members Sample Bundle has 16 Group Members gender &quot;male&quot; active aged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | 0 | 1 | 4 | 5 | 6 | 9 | 14 | 15 | 16 | 25 | 34 | 40 | 49 | 50 | 51 | 55 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Given Household Members Sample Bundle has 21 Group Members gender &quot;female&quot; active aged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      | 0 | 1 | 2 | 4 | 5 | 6 | 7 | 9 | 14 | 15 | 16 | 21 | 25 | 34 | 40 | 44 | 48 | 49 | 50 | 51 | 55 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    When Household Members Measure is run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;evaluatedResource.count()&quot; = &quot;17&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;group.count()&quot; = &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;group.where(id=&#x27;males&#x27;).population[0].count&quot; = &quot;37&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;group.where(id=&#x27;males&#x27;).population[1].count&quot; = &quot;37&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;group.where(id=&#x27;males&#x27;).population[2].count&quot; = &quot;16&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;group.where(id=&#x27;females&#x27;).population[0].count&quot; = &quot;37&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;group.where(id=&#x27;females&#x27;).population[1].count&quot; = &quot;37&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then Household Members Measure Report has &quot;group.where(id=&#x27;females&#x27;).population[2].count&quot; = &quot;21&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>&#x27;Household Members&#x27; is the TAG. This should match your Measure core functionality</li>
<li>&#x27;ecbis/measure_cql/household_measure_reporting.cql&#x27; is cql path. This should be the path from main dir i.e. fhir-resources where your cql resides</li>
<li>&#x27;ecbis/measure/household_measure.fhir.json&#x27; is measure path. This should be the path from main dir i.e. fhir-resources where your measure resides</li>
<li>Change test data as per your requirements. You can change values into double quotes, int values, or in data tables as per your test requirements</li>
<li>Make sure to use same Step definition convention i.e. Given <code>TAG</code> CQL is &quot;<code>cql-path</code>&quot; OR Given <code>TAG</code> Measure is &quot;<code>measure path</code>&quot;. Otherwise you would need to write your own Steps into YourTagTest.kt file using standard defined in <a href="https://medium.com/@mlvandijk/kukumber-getting-started-with-cucumber-in-kotlin-e55112e7309b" target="_blank" rel="noopener noreferrer">Cucumber Tutorial</a></li>
<li>The assertions should also use same Step convention. i.e. Then <code>TAG</code> Measure Report has &quot;<code>your-fhirpath-in-measure-report</code>&quot; = &quot;<code>expected-size</code>&quot;. Or you can add additional assertions to Test code file as in <code>Then</code> section below</li>
<li>Add your test file to kotlin/com/fhircore/resources/testing/measure/YourMeasureNameTest.kt i.e. kotlin/com/fhircore/resources/testing/measure/HouseholdMembersMeasureTest.kt</li>
</ul>
<p><em><strong>Note</strong> The feature-file name should match with test-file name i.e. household-members.feature corresponds to HouseholdMembersMeasureTest.kt</em></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(Cucumber::class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@CucumberOptions(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  features = [&quot;src/test/resources/measure-report/household-members.feature&quot;], tags = &quot;not @ignored&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class HouseholdMembersMeasureTest : En {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private val measureContext = MeasureContext().apply { withMeasurePeriod(&quot;2022-01-01&quot;, &quot;2022-07-15&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private val TAG = &quot;Household Members&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  init {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    measureContext.givenCql(TAG) // helper step definition to load and print Library in console</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    measureContext.givenMeasure(TAG) // helper step definition to load and print Measure in console</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // add your test data below. you can add custom code as well to load data of your choice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    measureContext.givenGroupsXHavingYActivePerson(TAG) // helper step definition to add households test data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    measureContext.givenGroupMembersXHavingGenderYAndAgesZ(TAG) // helper step definition to add household members, patients test data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // helper step definition to run measure of given type and print report in console</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    measureContext.whenMeasureRun(TAG, MeasureEvalType.POPULATION)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // helper step definition to add assertions. You can add custom assertions as well to test complex data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Then(&quot;Household Members Measure Report has {string} = {string}&quot;) { path: String, value: String -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      measureContext.thenMeasureReportHas(path, value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Add additional assertions if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // assertEquals(0.5, measureContext.measureReport.group.first().measureScore)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The final working Library, Measure, and MeasureReport are printed to console which can be copied and POST/PUT to server.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="evaluate-measure-operation"><strong>$evaluate-measure operation</strong><a href="#evaluate-measure-operation" class="hash-link" aria-label="Direct link to evaluate-measure-operation" title="Direct link to evaluate-measure-operation">​</a></h5>
<p>The $evaluate-measure operation is used to calculate an eMeasure and obtain the results</p>
<p><strong>Parameters</strong></p>
<table><tr><td><strong>Use</strong></td><td><strong>Name</strong></td><td><strong>Cardinality</strong></td><td><strong>Type</strong></td><td><strong>Documentation</strong></td></tr><tr><td>IN</td><td>periodStart</td><td>1..1</td><td><a href="https://www.hl7.org/fhir/datatypes.html#date">date</a></td><td>The start of the measurement period. In keeping with the semantics of the date parameter used in the FHIR search operation, the period will start at the beginning of the period implied by the supplied timestamp. E.g. a value of 2014 would set the period start to be 2014-01-01T00:00:00 inclusive</td></tr><tr><td>IN</td><td>periodEnd</td><td>1..1</td><td><a href="https://www.hl7.org/fhir/datatypes.html#date">date</a></td><td>The end of the measurement period. The period will end at the end of the period implied by the supplied timestamp. E.g. a value of 2014 would set the period end to be 2014-12-31T23:59:59 inclusive</td></tr><tr><td>IN</td><td>measure</td><td>0..1</td><td><a href="https://www.hl7.org/fhir/datatypes.html#string">string</a>
(<a href="https://www.hl7.org/fhir/search.html#reference">reference</a>)</td><td>The measure to evaluate. This parameter is only required when the operation is invoked on the resource type, it is not used when invoking the operation on a Measure instance</td></tr><tr><td>IN</td><td>reportType</td><td>0..1</td><td><a href="https://www.hl7.org/fhir/datatypes.html#code">code</a></td><td>The type of measure report: subject, subject-list, or population. If not specified, a default value of subject will be used if the subject parameter is supplied, otherwise, population will be used</td></tr><tr><td>IN</td><td>subject</td><td>0..1</td><td><a href="https://www.hl7.org/fhir/datatypes.html#string" target="_blank" rel="noopener noreferrer">string</a>(<a href="https://www.hl7.org/fhir/search.html#reference" target="_blank" rel="noopener noreferrer">reference</a>)</td><td>Subject for which the measure will be calculated. If not specified, the measure will be calculated for all subjects that meet the requirements of the measure. If specified, the measure will only be calculated for the referenced subject(s)</td></tr><tr><td>IN</td><td>practitioner</td><td>0..1</td><td><a href="https://www.hl7.org/fhir/datatypes.html#string">string</a>
(<a href="https://www.hl7.org/fhir/search.html#reference">reference</a>)</td><td>Practitioner for which the measure will be calculated. If specified, the measure will be calculated only for subjects that have a primary relationship to the identified practitioner</td></tr><tr><td>IN</td><td>lastReceivedOn</td><td>0..1</td><td><a href="https://www.hl7.org/fhir/datatypes.html#dateTime">dateTime</a></td><td>The date the results of this measure were last received. This parameter is only valid for patient-level reports and is used to indicate when the last time a result for this patient was received. This information can be used to limit the set of resources returned for a patient-level report</td></tr><tr><td>OUT</td><td>return</td><td>1..1</td><td><a href="https://www.hl7.org/fhir/measurereport.html">MeasureReport</a></td><td>The results of the measure calculation. See the MeasureReport resource for a complete description of the output of this operation. Note that implementations may choose to return a MeasureReport with a status of pending to indicate that the report is still being generated. In this case, the client can use a polling method to continually request the MeasureReport until the status is updated to complete</td></tr></table>
<p>The effect of invoking this operation is to calculate the measure for the given subject, or all subjects if no subject is supplied, and return the results as a MeasureReport resource of the appropriate type. Note that whether or not this operation affects the state of the server depends on whether the server persists the generated MeasureReport. If the MeasureReport is not persisted, this operation can be invoked with GET</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the--measurereport-output">The  MeasureReport output<a href="#the--measurereport-output" class="hash-link" aria-label="Direct link to The  MeasureReport output" title="Direct link to The  MeasureReport output">​</a></h2>
<p>The resulting MeasureReport of above Measure is <a href="https://github.com/opensrp/fhir-resources/blob/main/ecbis/measure_report/household_measure_report.fhir.json" target="_blank" rel="noopener noreferrer">here</a>. Some important components of report are below</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;resourceType&quot;: &quot;MeasureReport&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;contained&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceType&quot;: &quot;Observation&quot;, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;extension&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/cqf-measureInfo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;extension&quot;: [...., {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;url&quot;: &quot;populationId&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;valueString&quot;: &quot;group&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           } ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;code&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;coding&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;code&quot;: &quot;Group/1818d503-7226-45cb-9ac7-8c8609dd37c0/_history/3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  } ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &quot;summary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;measure&quot;: &quot;http://fhir.org/guides/who/anc-cds/Measure/HOUSEHOLDIND01&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;date&quot;: &quot;2022-06-28T12:28:28+05:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;period&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;start&quot;: &quot;2022-01-01T00:00:00+05:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;end&quot;: &quot;2022-06-28T23:59:59+05:00&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;group&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;males&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;population&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;id&quot;: &quot;initial-population&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;count&quot;: 136</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;id&quot;: &quot;denominator&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;count&quot;: 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;id&quot;: &quot;numerator&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;count&quot;: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;measureScore&quot;: { &quot;value&quot;: 0.42857142857142855 },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;stratifier&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;id&quot;: &quot;by-age&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;stratum&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;value&quot;: { &quot;text&quot;: &quot;P0Y&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;population&quot;: [ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;id&quot;: &quot;initial-population&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;count&quot;: 31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;id&quot;: &quot;denominator&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;count&quot;: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;id&quot;: &quot;numerator&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;code&quot;: { ... },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;count&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              } ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;measureScore&quot;: { &quot;value&quot;: 0.5 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }, { ... ... ... ...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Notable components of the MeasureReport</strong></p>
<p>Details of some notable fields in above MeasureReport (calculated from Measure) are</p>
<ol>
<li>
<p><strong>contained</strong>: The Measure <a href="http://hl7.org/fhir/R4/measure-definitions.html#Measure.supplementalData" target="_blank" rel="noopener noreferrer">property</a> <code>supplementalData</code> is calculated for each measure <code>subject</code> and output as an <a href="http://hl7.org/fhir/R4/observation.html" target="_blank" rel="noopener noreferrer">Observation</a> having extension <a href="http://hl7.org/fhir/StructureDefinition/cqf-measureInfo" target="_blank" rel="noopener noreferrer">http://hl7.org/fhir/StructureDefinition/cqf-measureInfo</a> with inner extension defining the variable requested i.e. <code>group</code> in case above. The code.coding.code has the value of given variable <code>Group/1818d503-7226-45cb-9ac7-8c8609dd37c0/_history/3</code> in example above</p>
</li>
<li>
<p><strong>measure</strong>: The Measure.url for which this report was generated i.e. <a href="http://fhir.org/guides/who/anc-cds/Measure/HOUSEHOLDIND01" target="_blank" rel="noopener noreferrer">http://fhir.org/guides/who/anc-cds/Measure/HOUSEHOLDIND01</a></p>
</li>
<li>
<p><strong>period</strong>: Measure period which was sent for date filter i.e. reporting period start and end. The Measure interval has closed boundaries. Read details <a href="https://cql.hl7.org/02-authorsguide.html#interval-values" target="_blank" rel="noopener noreferrer">here</a></p>
</li>
<li>
<p><strong>group</strong>: The calculated value for each Measure indicator with</p>
<ul>
<li>id: id/name of group/indicator/stratifier as defined in Meaure.</li>
<li>count: Calculated value from CQL for given variable</li>
<li>measureScore: The percent/ratio of calculated value i.e. numerator/denomintor. Note that for stratifier the score denominator is stratifier denomintor rather than group denominator</li>
</ul>
</li>
<li>
<p><strong>stratifier</strong>: Count for given indicator disaggregated by each type. The stratifier misses the values where counts are zero. Hence if stratifier has predefined criteria, each should be a calculated as separate group.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="opensrp-integration">OpenSRP Integration<a href="#opensrp-integration" class="hash-link" aria-label="Direct link to OpenSRP Integration" title="Direct link to OpenSRP Integration">​</a></h2>
<p>Once your Measure, and Library is ready add these to sync_config.json to make sure that the Measure and all dependent Library resources are always synced.</p>
<ol>
<li>Save/Update Measure on server i.e. POST - <a href="https://your.fhir.server/fhir/Measure" target="_blank" rel="noopener noreferrer">https://your.fhir.server/fhir/Measure</a> OR PUT - <a href="https://your.fhir.server/fhir/Measure/measure-id" target="_blank" rel="noopener noreferrer">https://your.fhir.server/fhir/Measure/measure-id</a></li>
<li>Save/Update Library on server i.e. POST - <a href="https://your.fhir.server/fhir/Library" target="_blank" rel="noopener noreferrer">https://your.fhir.server/fhir/Library</a> OR PUT - <a href="https://your.fhir.server/fhir/Library/library-id" target="_blank" rel="noopener noreferrer">https://your.fhir.server/fhir/Library/library-id</a></li>
<li>Update the sync_config.json Debug or Binary config for your app with new your measure id, and library id as below</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resource&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceType&quot;: &quot;SearchParameter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;_id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;code&quot;: &quot;_id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;base&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Measure&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;token&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;expression&quot;: &quot;133082,133104,{your-measure-id}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... ... ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;resource&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceType&quot;: &quot;SearchParameter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;_id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;code&quot;: &quot;_id&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;base&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Library&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;token&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;expression&quot;: &quot;1753,133081,133105,{your-library-id},{any-helper-library-ids}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Update the measure_report_config.json Debug or Binary config with your new measure so that it shows up in the list</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;reports&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... ... ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;new serial id in list&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;title&quot;: &quot;Household Members&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;description&quot;: &quot;Number of Households, Household members registered, disaggregated by age and gender for each age group&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;url&quot;: &quot;http://fhir.org/guides/who/anc-cds/Measure/HOUSEHOLDIND01&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... ... ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="screenshot-of-measurereport-on-opensrp">Screenshot of MeasureReport on OpenSRP<a href="#screenshot-of-measurereport-on-opensrp" class="hash-link" aria-label="Direct link to Screenshot of MeasureReport on OpenSRP" title="Direct link to Screenshot of MeasureReport on OpenSRP">​</a></h2>
<img width="200" height="400" src="https://user-images.githubusercontent.com/4829880/188478590-93474727-4ef2-4ba7-acfc-8eb6ac9e32d5.png">
<img width="200" height="400" src="https://user-images.githubusercontent.com/4829880/188478602-e3941d73-4582-43a2-bc24-423eb1253fe0.png"></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opensrp/fhircore/tree/main/docs/engineering/app/configuring/in-app-reporting.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/engineering/app/configuring/forms/validation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Validation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/engineering/app/configuring/internationalization"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Internationalization</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#measure" class="table-of-contents__link toc-highlight">Measure</a></li><li><a href="#measurereport" class="table-of-contents__link toc-highlight">MeasureReport</a></li><li><a href="#cql-logicdecision-library-for-measure" class="table-of-contents__link toc-highlight">CQL Logic/Decision Library for Measure</a></li><li><a href="#testing-the-measure-cql-library" class="table-of-contents__link toc-highlight">Testing the Measure CQL Library</a></li><li><a href="#the--measurereport-output" class="table-of-contents__link toc-highlight">The  MeasureReport output</a></li><li><a href="#opensrp-integration" class="table-of-contents__link toc-highlight">OpenSRP Integration</a></li><li><a href="#screenshot-of-measurereport-on-opensrp" class="table-of-contents__link toc-highlight">Screenshot of MeasureReport on OpenSRP</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensrp.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenSRP<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ona.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ona<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Ona Systems</div></div></div></footer></div>
</body>
</html>