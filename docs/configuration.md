# Documentation of Single APK Approach Configuration
<img src="https://user-images.githubusercontent.com/62053304/169209957-e59780e8-4e68-49fc-8167-a247d696d09b.jpg" width="512">
The configurations in Single APK Approach is using the combination of a single Composition and multiple Binary resource.

## Composition
Composition config is identified using an appId and is the entry point to access all the Binary configs associated with that appId.

Example of appId would be: anc, ecbis, quest, etc.

### Structure of Composition Config
There are 2 attributes to be highlighted. It is the `identifier` and `section` attributes.

These are the only attributes that developers need to specifically fill, the other attributes can be generic by using our own template and some are also automatically generated by the FHIR server.

* `identifier`

   The `identifier` attribute is a single unique value that represents an appId and will differentiate a Composition config from one another.
   
   ```json
   "identifier": {
     "use": "official",
     "value": "appId"
   }
   ```

* `section`

   The `section` attribute is multivalue that represent configurations.
   
   Each `section` contains:
   
   * `reference` to the Binary config associated with the Composition appId
   
   * `identifier` that represents a config classification name
   
   ```json
   "section": [
    {
      "title": "App configuration",
      "mode": "working",
      "focus": {
        "reference": "Binary/xxxxx",
        "identifier": {
          "value": "application"
        }
      }
    },
    {
      "title": "Login configuration",
      "mode": "working",
      "focus": {
        "reference": "Binary/xxxxx",
        "identifier": {
          "value": "login"
        }
      }
    }
   ]
   ```

## Binary

Binary config contains attributes that will be used in the app.

List of common Binary configs `classfication`:

| `classification`               | What it configures                                                              |
| :----------------------------- | :------------------------------------------------------------------------ |
| application           | Configure the app level                             |
| login                 | Configure the login page                             |
| app_feature           | Configure the available feature                             |
| pin                   | Configure the pin page                             |
| data_filters          | Configure the filters that the app will uses e.g patient register, family register                           |
| forms                 | Configure the Questionnaires that the app will uses                           |
| patient_register      | Configure the patient register page                             |
| sync                  | Configure the resource that will be synced                             |

### Structure of Binary Config

Common attributes:

* `appId` e.g anc, ecbis, quest, etc
  
* `classification` as config name e.g application, login, sync, etc

Structure of each `classification`:

1. application

* `theme`

   Sets the theme for the app

* `language`

   Sets the languages for the app

* `syncInterval`

   Sets the periodic sync interval in seconds. Default 30

* `applicationName`

   Sets the application display name

* `appLogoIconResourceFile`

   Sets the application logo thumb icon, there must be png file inside

* `count`

   Sets the application maximum records when downloading resource drawable folder

TODO:

structure of each config classification: what each attribute does (or used in-app)

how a config is interpreted, code wise
