# Working with rules

Rules are used to define logic and conditions for evaluating and processing healthcare data. FHIR rules can be used to validate data, create alerts and notifications based on certain conditions, or trigger workflows and other automated processes.
Rules can also be used to extract specific data from a FHIR resource or to transform data from one format to another.

## extractValue() rule

To extract specific data value in the sample JSON below, include **extractValue()** and add the required parameters to the method in order to extract the required value.

``` json
"rules": [
    {
      "name": "familyName",
      "condition": "true",
      "actions": [
        "data.put('familyName', fhirPath.extractValue(Group, 'Group.name'))"
      ]
    },
    {
      "name": "familyId",
      "condition": "true",
      "actions": [
        "data.put('familyId', fhirPath.extractValue(Group, 'Group.identifier[0].value'))"
      ]
    },
    {
      "name": "familyLogicalId",
      "condition": "true",
      "actions": [
        "data.put('familyLogicalId', fhirPath.extractValue(Group, 'Group.id'))"
      ]
    }
  ],
```

## Config properties of extractValue() rule using the above json config
|Property | Description | Required | Default |
|--|--|:--:|:--:|
name | Provides a descriptive name for the rule to be extracted | Yes | |
condition | Indicates that the rule should always be evaluated | Yes | true |
actions | Specifies the specific operations to be performed when the rule is evaluated | Yes | |

The **"data.put()"** function is used to store the extracted data in a data object, using a key-value pair format.


## evaluateToBoolean() rule

This rule is used within the rules engine or workflow to be able to determine whether an expression or condition is true or not. To evaluate specific data in the sample JSON below, include **evaluateToBoolean()** and add the required parameters to the method in order to determine whether the output is true or false.

``` json
    {
      "name": "isPregnant",
      "condition": "true",
      "actions": [
        "data.put('isPregnant', service.evaluateToBoolean(data.get('activeConditions'), \"Condition.code.text = 'Pregnant' \", false))"
      ]  
    },
```   
## Config properties of evaluateToBoolean() rule using the above json config
|Property | Description | Required | Default |
|--|--|:--:|:--:|
name | Provides a descriptive name for the rule to be extracted | Yes | |
condition | Indicates that the rule should always be evaluated | Yes | true |
actions | Specifies the specific operations to be performed when the rule is evaluated | Yes | List |
description | Provides relevant information about the rule to be evaluated | | |
priority | Specifies the priority of the component. The priority value determines the order in which the components are evaluated and executed. Lower values indicate higher priority | | 1 |

**evaluateToBoolean()**  takes **three** parameters:

|Parameter | Example | Description | Required |
|--|--|:--:|:--:|
context| 'isPregnant' | Specifies the context or data from which the expression is being evaluated | Yes |
FhirPathExpression | service.evaluateToBoolean(data.get('activeConditions'), \"Condition.code.text = 'Pregnant' \")| Specifies the expression to be evaluated. It contains the logical operators and variables that refernce values from the context | Yes |
defaultValue | false | A boolean value that specifies the defaultValue to be returned if the expression results in an error or does not produce a boolean value | |
