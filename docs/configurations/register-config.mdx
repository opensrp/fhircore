# Register configuration

Registers are the entry point to FHIRCore application. Typically this is a list used to displayed the configured [FHIR resources](https://www.hl7.org/FHIR/resourcelist.html). Clicking on a register item directs the user to the configured profile.

:::info
For every register in the application there should at least be one profile configuration. Similar registers can re-use the same profile configuration.
:::

## Config properties

|Property | Description | Required | Default |
|--|--|:--:|:--:|
appId | Unique identifier for the application | Yes | |
configType | Type of configuration | Yes |  `register` |


## Dynamic data pass between Registers and Profiles
For you to pass data between registers you can make use of **action config params** which are executed when **LAUNCH_REGISTER** is invoked.registers
Data extraction happens during rules execution and is persisted in computedValuesMap which is later using to interpolated values annotated with @value.registers
For example, assume the LAUNCH_REGISTER onClick function of practition_register_config takes you to household_profile screen and you would like pass send practitionerId from practition_register_config to household_profile, define it as described below

### Practitioner LAUNCH_REGISTER
#### Sample JSON
1. Write rules to extract the data you need.
``` json
"rules":[
     {
      "name": "practitionerId",
      "condition": "true",
      "actions": [
        "data.put('practitionerId', fhirPath.extractValue(Practitioner, 'Practitioner.id.replace(\"Practitioner/\",\"\")').split(\"/\").get(0))"
      ]
    }
  ]
```

2. add your params at **LAUNCH_REGISTER** section of practition_register_config.json
#### Sample JSON
``` json
     {
                          "trigger": "ON_CLICK",
                          "workflow": "LAUNCH_REGISTER",
                          "id": "householdRegister",
                          "display": "@{practitionerName} - Household Register",
                          "params": [
                            {
                              "paramType": "PARAMDATA",
                              "key": "practitionerId",
                              "value": "@{practitionerId}"
                            }
                          ]
                        }
```

### Household_config.json
A dataquery config to filter by practitionerId. For more info refer to dataquery section

#### Sample JSON

``` json
      {
          "id": "householdQueryPractitionerId",
          "filterType": "TOKEN",
          "key": "_tag",
          "valueType": "CODING",
          "valueCoding": {
            "system": "https://smartregister.org/",
            "code": "@{practitionerId}"
          }
        }
```

## Dynamic data pass between registers config properties

|Property | Description | Required | Default |
|--|--|:--:|:--:|
rules name | Unique identifier for the rules                       | Yes | empty string |
condition  | specification of execution                            | Yes |  false |
actions    | an array of the rule logic with a fhirPathExpression  | Yes |  null |
trigger    | application workflow action                           | Yes |  no default |
workflow   | An application event that can trigger a workflow      | Yes |  null |
params     | An array of actionParameters to pass to another register | no  |  emptyArray |
paramType  | Action ParameterType to use e.g PREPOPULATE OR PARAMDATA   | no  |  null |
key        | Action ParameterType unique key if defined but not tag is given   | yes  |  application throws exception |
value      | Action ParameterType corresponding key's value                     | yes  |  application throws exception |


