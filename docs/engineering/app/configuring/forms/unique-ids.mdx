---
title: Unique ID assignment
---

Unique IDs are unique identifier values assigned to a resource (e.g. Patient) and are associated with a single entity.

Unique ID assignment configs determine how pre-generated unique IDs are retrieved from a Group FHIR resource and subsequently populated in a Questionnaire field.

Here is a sample configuration for the unique identifier assignment:

```json
{
  "uniqueIdAssignment": {
    "linkId": "phn",
    "idFhirPathExpression": "Group.characteristic.where(exclude=false and code.text='phn').first().value.text",
    "readOnly": false,
    "resource": "Group",
    "sortConfigs": [
      {
        "paramName": "_lastUpdated",
        "dataType": "DATE",
        "order": "DESCENDING"
      }
    ],
    "resourceFilterExpression": {
      "conditionalFhirPathExpressions": [
        "Group.active = true and Group.type = 'device' and Group.name = 'Unique IDs'"
      ],
      "matchAll": true
    }
  }
}
```

The configuration contains the following properties:

**linkId** - The linkId for the targeted Questionnaire item
**idFhirPathExpression** - The FHIR path expression used to extract ID from a resource
**readOnly** - Enable or disable editing of the field. Defaults to `true`
**resource** - FHIR resource used to store generated unique IDs
**sortConfigs** - For ordering resources. It is important to ensure the resources are ordered by last updated
**resourceFilterExpression** - Extra configurations to apply filter via code on the declared Resource

*NOTE:* If the `readOnly` configuration is set to false, the ID field in the Questionnaire becomes editable. If the prepopulated ID
is modified and a different ID is submitted with the Questionnaire, the prepopulated ID will not be marked as used.
This means that it will still be prepopulated the next time the Questionnaire is launched.

## Characteristic-based Group resource for unique IDs

IDs are stored as `text` in a `valueCodeableConcept` in the `characteristic` field.
The batch of IDs is assigned to a Practitioner using the `managingEntity`.

When an ID is used, the characteristic entry with that ID is updated to be excluded by setting `"exclude": true`. Once all IDs in the Group are used, the group is set to inactive.

## Sample Group resource with unique IDs

```json
{
  "resourceType": "Group",
  "id": "37312ad4-538e-4535-82d2-ea14f40deeb9",
  "meta": {
    "versionId": "9",
    "lastUpdated": "2023-12-22T06:43:35.986+00:00",
    "source": "#04a1c85fb6adf0cc",
    "tag": [
      {
        "system": "https://smartregister.org/care-team-tag-id",
        "code": "3e005baf-854b-40a7-bdd5-9b73f63aa9a3",
        "display": "Practitioner CareTeam"
      },
      {
        "system": "https://smartregister.org/organisation-tag-id",
        "code": "41eae946-bdc4-4179-b404-6503ff12f59c",
        "display": "Practitioner Organization"
      },
      {
        "system": "https://smartregister.org/location-tag-id",
        "code": "3816",
        "display": "Practitioner Location"
      },
      {
        "system": "https://smartregister.org/practitioner-tag-id",
        "code": "49b72a3d-44cd-4a74-9459-4dc9f6b543fa",
        "display": "Practitioner"
      },
      {
        "system": "https://smartregister.org/app-version",
        "code": "Not defined",
        "display": "Application Version"
      }
    ]
  },
  "identifier": [
    {
      "system": "http://smartregister.org",
      "value": "37312ad4-538e-4535-82d2-ea14f40deeb9"
    }
  ],
  "active": true,
  "type": "device",
  "actual": true,
  "name": "Unique IDs",
  "managingEntity": {
    "reference": "Practitioner/49b72a3d-44cd-4a74-9459-4dc9f6b543fa"
  },
  "characteristic": [
    {
      "code": {
        "text": "phn"
      },
      "valueCodeableConcept": {
        "text": "1000010001"
      },
      "exclude": false
    },
    {
      "code": {
        "text": "phn"
      },
      "valueCodeableConcept": {
        "text": "1000020002"
      },
      "exclude": false
    },
    {
      "code": {
        "text": "phn"
      },
      "valueCodeableConcept": {
        "text": "1000030003"
      },
      "exclude": false
    },
    {
      "code": {
        "text": "phn"
      },
      "valueCodeableConcept": {
        "text": "1000040004"
      },
      "exclude": false
    },
    {
      "code": {
        "text": "phn"
      },
      "valueCodeableConcept": {
        "text": "1000050005"
      },
      "exclude": false
    }
  ]
}
```

## Generating IDs
