name: Manual APK Release
run-name: Generating a FHIR Core Release APK ðŸš€
on: [push]
jobs:
   test-import-dummy-credentials:
      runs-on: ubuntu-latest
      steps:
        - run: echo "${{ github.actor }} is running the job.."
        - name: Import Secrets
          id: import-secrets
          uses: hashicorp/vault-action@v2
          with:
            url: https://vault.onalabs.org
            token: ${{ secrets.VAULT_TOKEN }}
            caCertificate: ${{ secrets.VAULT_CA_CERT }}
            secrets: |
                    kv-v2-fhircore/data/opensrp-security-focus MY_LITTLE_SECRET | SECRET_TEST ;
            script: echo "${{ steps.import-secrets.outputs.SECRET_TEST }}" && echo "${{ env.SECRET_TEST }} && echo "${{ env.SECRET_TEST }}" | awk '{print length}'
            
        - name: Import Secrets
          id: import-secrets-2
          uses: hashicorp/vault-action@v2
          with:
            url: https://vault.onalabs.org
            method: userpass
            username: ${{ secrets.VAULT_USERNAME }}
            password: ${{ secrets.VAULT_PASSWORD }}
            caCertificate: ${{ secrets.VAULT_CA_CERT }}
            secrets: |
                    kv-v2-fhircore/data/opensrp-security-focus MY_LITTLE_SECRET | SECRET_TEST ;
            script: echo "${{ steps.import-secrets-2.outputs.SECRET_TEST }}" && echo "${{ env.SECRET_TEST }}"&& echo "${{ env.SECRET_TEST }}" | awk '{print length}'


              
